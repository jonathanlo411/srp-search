<script lang='ts'>
  import { getContext } from 'svelte';
  import Popup from './popup.svelte';

  // Weired bug where types aren't being detected
  // @ts-ignore
  const { open } = getContext('simple-modal');

  function showModal(
      data: TimingResponse | PointsResponse | OvertakeResponse,
      mode: modeSelect
  ) {
      open(Popup, { rowData: data, mode: mode, fastest: fastest, sourcePage: sourcePage });
  }

  export let rowData: TimingResponse | PointsResponse | OvertakeResponse;
  export let mode: modeSelect;
  export let fastest: boolean;
  export let sourcePage: string;
</script>

<tr on:click={() => showModal(rowData, mode)} class:fastest={fastest}>
  {#each Object.values(rowData) as value}
      <td>{(value) ? value : '\n'}</td>
  {/each}
</tr>

<style>
  .fastest {
      color: var(--fastest)
  }
</style>